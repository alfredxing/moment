var loader = Components.classes["@mozilla.org/moz/jssubscript-loader;1"].getService(Components.interfaces.mozIJSSubScriptLoader);loader.loadSubScript("chrome://moment/content/jquery-1.8.2.min.js");var prefs = Components.classes["@mozilla.org/preferences-service;1"].getService(Components.interfaces.nsIPrefBranch);var get = new XMLHttpRequest();get.open("GET", "https://api.aerisapi.com/observations/:auto?client_id=wgE96YE3scTQLKjnqiMsv&client_secret=sFA4Gfz8s8brxUUHoZTQ3iZIRy6YSwLhf1wJQzDi", true);get.onreadystatechange = function (oEvent) {  if (get.readyState === 4) {	if (get.status === 200) {		var u = prefs.getCharPref("extensions.moment.units");		var r = JSON.parse(get.responseText);		var e = r.response.ob.weather;		if (u.toUpperCase() === "F") {			var f = r.response.ob.tempF;		}		else {			var f = r.response.ob.tempC;		}		$("#degrees").text(f);		$("#weather").text(e);		$("#conditions").animate({opacity:1},300);		storeWeather(f, e)	} else {	  console.log("Error", get.statusText);	}  }};function refresh() {	var v = new Date();	var p = v.getHours();	var q = v.getMinutes();	var t = v.getSeconds();	if (10 > p) {		p = "0" + p	}	if (10 > q) {		q = "0" + q	}	if (10 > t) {		t = "0" + t	}	var r = p + "   " + q + "   " + t;	var u = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];	var v = new Date();	var o = v.getMonth();	var n = u[o];	var l = v.getDate();	var m = v.getYear();	if (m < 2000) {		m = m + 1900	}	var s = n + " " + l + " " + m;	$("#time").text(r);	$("#date").text(s)}function storeWeather(d,w) {	var a = new Date();	var c = a.getTime();	c += 3600 * 105;	a.setTime(c);	prefs.setCharPref("extensions.moment.degrees", d);	prefs.setCharPref("extensions.moment.weather", w);	prefs.setCharPref("extensions.moment.expires", a.toGMTString())}function getWeather() {	var b = new Date();	var c = b;	var a = new Date(prefs.getCharPref("extensions.moment.expires"));	if ((a - c) > 0) {		$("#degrees").text(prefs.getCharPref("extensions.moment.degrees"));		$("#weather").text(prefs.getCharPref("extensions.moment.weather"));		$("#conditions").animate({opacity:1},300)	}	else {		get.send(null);	}}function load() {	document.body.style.background = prefs.getCharPref("extensions.moment.background").toUpperCase();	document.body.style.color = prefs.getCharPref("extensions.moment.text").toUpperCase();	$(".wunderground").css("color",prefs.getCharPref("extensions.moment.text").toUpperCase());	refresh();	interval = setInterval(function () {		refresh()	}, 1000);	$("body").animate({opacity:1},500)}